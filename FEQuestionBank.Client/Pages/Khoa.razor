@page "/khoa"
@using FEQuestionBank.Client.Services
@using FEQuestionBank.Client.Share
@inject IKhoaApiClient KhoaApiClient

<MudPaper Class="p-4">

    <MudText Typo="Typo.h5" Class="mb-2">Danh sách Khoa</MudText>

    @if (isLoading)
    {
        <MudProgressCircular Indeterminate="true" Color="Color.Primary" />
    }
    else if (loadError)
    {
        <MudAlert Severity="Severity.Error" Variant="Variant.Filled">
            Không thể tải dữ liệu. Vui lòng thử lại.
        </MudAlert>
    }
    else
    {
        <MudTable Items="khoas" Hover="true" Bordered="true" Striped="true">
            <HeaderContent>
                <MudTh Style="background-color:#1976d2;color:white;">ID</MudTh>
                <MudTh Style="background-color:#1565c0;color:white;">Tên Khoa</MudTh>
            </HeaderContent>
           
        </MudTable>
    }

</MudPaper>
<MudDivider Class="my-4" />

<MudButton Variant="Variant.Filled">Default</MudButton>
<MudButton Variant="Variant.Filled" Color="Color.Primary">Primary</MudButton>
<MudButton Variant="Variant.Filled" Color="Color.Secondary">Secondary</MudButton>
<MudButton Variant="Variant.Filled" Disabled="true">Disabled</MudButton>

@code {
    private List<KhoaDto> khoas = new();
    private bool isLoading = true;
    private bool loadError = false;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            isLoading = true;
            khoas = await KhoaApiClient.GetKhoasAsync();
        }
        catch
        {
            loadError = true;
        }
        finally
        {
            isLoading = false;
        }
    }
}